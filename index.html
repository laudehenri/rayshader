<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Maps and Visualize Data in 2D and 3D • rayshader</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Create Maps and Visualize Data in 2D and 3D">
<meta property="og:description" content="Uses a combination of raytracing and multiple hill shading methods to produce 2D and 3D data visualizations and maps. Includes water detection and layering functions, programmable color palette generation, several built-in textures for hill shading, 2D and 3D plotting options, a built-in path tracer, Wavefront OBJ file export, and the ability to save 3D visualizations to a 3D printable format.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><meta property="twitter:image:src" content="https://www.rayshader.com/reference/figures/website.png">
<meta name="twitter:site" content="@github">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="tylermorganwall/rayshader">
<meta name="twitter:description" content="R Package for Producing and Visualizing Hillshaded Maps from Elevation Matrices, in 2D and 3D - tylermorganwall/rayshader">
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rayshader</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.20.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials/Blog Posts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://www.tylermw.com/a-step-by-step-guide-to-making-3d-maps-with-satellite-imagery-in-r/">A Step-by-Step Guide to Making 3D Maps with Satellite Imagery in R</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/3d-ggplots-with-rayshader/">Introducing 3D ggplots with rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/portrait-mode-data/">Portrait Mode for Data: Rayshader + Rayfocus</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/3d-printing-rayshader/">From R to Reality: 3D Printing Maps with Rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/3d-maps-with-rayshader/">Slicing Through Monterey Bay: Creating 3D Maps with Rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/making-beautiful-maps/">Draining Lake Mead: Making Beautiful Maps with Rayshader</a>
    </li>
    <li>
      <a href="https://www.tylermw.com/throwing-shade/">Throwing Shade at the Cartographer Illuminati: Raytracing the Washington Monument in R</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    Changelog
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/tylermorganwall/rayshader">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="rayshader" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rayshader" class="anchor"></a>rayshader<img src="reference/figures/raylogosmall.png" align="right">
</h1></div>
<p><img src="reference/figures/smallhobart.gif"></p>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p><strong>rayshader</strong> is an open source package for producing 2D and 3D data visualizations in R. <strong>rayshader</strong> uses elevation data in a base R matrix and a combination of raytracing, spherical texture mapping, overlays, and ambient occlusion to generate beautiful topographic 2D and 3D maps. In addition to maps, <strong>rayshader</strong> also allows the user to translate <strong>ggplot2</strong> objects into beautiful 3D data visualizations.</p>
<p>The models can be rotated and examined interactively or the camera movement can be scripted to create animations. Scenes can also be rendered using a high-quality pathtracer, <strong>rayrender</strong>.The user can also create a cinematic depth of field post-processing effect to direct the user’s focus to important regions in the figure. The 3D models can also be exported to a 3D-printable format with a built-in STL export function.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># To install the latest version from Github:</span>
<span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"tylermorganwall/rayshader"</span>)</pre></div>
</div>
<div id="functions" class="section level2">
<h2 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h2>
<p><img src="reference/figures/smallfeature.png"></p>
<p>Rayshader has seven functions related to mapping:</p>
<ul>
<li>
<code>ray_shade</code> uses user specified light directions to calculate a global shadow map for an elevation matrix. By default, this also scales the light intensity at each point by the dot product of the mean ray direction and the surface normal (also implemented in function <code>lamb_shade</code>, this can be turned off by setting <code>lambert=FALSE</code>.</li>
<li>
<code>sphere_shade</code> maps an RGB texture to a hillshade by spherical mapping. A texture can be generated with the <code>create_texture</code> function, or loaded from an image. <code>sphere_shade</code> also includes 7 built-in palettes: “imhof1”, “imhof2”, “imhof3”, imhof4“,”desert“,”bw“,”unicorn".</li>
<li>
<code>create_texture</code> programmatically creates texture maps given five colors: a highlight, a shadow, a left fill light, a right fill light, and a center color for flat areas. The user can also optionally specify the colors at the corners, but <code>create_texture</code> will interpolate those if they aren’t given.</li>
<li>
<code>ambient_shade</code> creates an ambient occlusion shadow layer, darkening areas that have less scattered light from the atmosphere. This results in valleys being darker than flat areas and ridges.</li>
<li>
<code>lamb_shade</code> uses a single user specified light direction to calculate a local shadow map based on the dot product between the surface normal and the light direction for an elevation matrix.</li>
<li>
<code>add_shadow</code> takes two of the shadow maps above and combines them, scaling the second one (or, if the second is an RGB array, the matrix) as specified by the user.</li>
<li>
<code>add_overlay</code> takes a 3 or 4-layer RGB/RGBA array and overlays it on the current map. If the map includes transparency, this is taken into account when overlaying the image. Otherwise, the user can specify a single color that will be marked as completely transparent, or set the full overlay as partly transparent.</li>
</ul>
<p>Rayshader also has three functions to detect and add water to maps:</p>
<ul>
<li>
<code>detect_water</code> uses a flood-fill algorithm to detect bodies of water of a user-specified minimum area.</li>
<li>
<code>add_water</code> uses the output of <code>detect_water</code> to add a water color to the map. The user can input their own color, or pass the name of one of the pre-defined palettes from <code>sphere_shade</code> to get a matching hue.</li>
<li>
<code>render_water</code> adds a 3D tranparent water layer to 3D maps, after the rgl device has already been created. This can either add to a map that does not already have a water layer, or replace an existing water layer on the map.</li>
</ul>
<p>Also included are two functions to add additional effects and information to your 3D visualizations:</p>
<ul>
<li>
<code>render_highquality</code> renders in the scene with a built-in pathtracer, powered by the <strong>rayrender</strong> package. Use this for high-quality maps with realistic light transport.</li>
<li>
<code>render_depth</code> generates a depth of field effect for the 3D map. The user can specify the focal distance, focal length, and f-stop of the camera, as well as aperture shape and bokeh intensity. This either plots the image to the local device, or saves it to a file if given a filename.</li>
<li>
<code>render_label</code> adds a text label to the <code>x</code> and <code>y</code> coordinate of the map at a specified altitude <code>z</code> (in units of the matrix). The altitude can either be specified relative to the elevation at that point (the default), or absolutely.</li>
</ul>
<p>And four functions to display and save your visualizations:</p>
<ul>
<li>
<code>plot_map</code> Plots the current map. Accepts either a matrix or an array.</li>
<li>
<code>write_png</code> Writes the current map to disk with a user-specified filename.</li>
<li>
<code>plot_3d</code> Creates a 3D map, given a texture and an elevation matrix. You can customize the appearance of the map, as well as add a user-defined water level.</li>
<li>
<code>render_snapshot</code> Saves an image of the current 3D view to disk (if given a filename), or plots the 3D view to the current device (useful for including images in R Markdown files).</li>
<li>
<code>render_movie</code> Creates and saves a mp4 file of the camera rotating around the 3D scene by either using a built-in orbit or by using one provided by the user.</li>
</ul>
<p>Finally, rayshader has a single function to generate 3D plots using ggplot2 objects:</p>
<ul>
<li>
<code>plot_gg</code> Takes a ggplot2 object (or a list of two ggplot2 objects) and uses the fill or color aesthetic to transform the plot into a 3D surface. You can pass any of the arguments used to specify the camera and the background/shadow colors in <code><a href="reference/plot_3d.html">plot_3d()</a></code>, and manipulate the displayed 3D plot using <code><a href="reference/render_camera.html">render_camera()</a></code> and <code><a href="reference/render_depth.html">render_depth()</a></code>.</li>
</ul>
<p>All of these functions are designed to be used with the magrittr pipe <code><a href="reference/pipe.html">%&gt;%</a></code>.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Rayshader can be used for two purposes: both creating hillshaded maps and 3D data visualizations plots. First, let’s look at rayshader’s mapping capabilities. For the latter, scroll below.</p>
</div>
<div id="mapping-with-rayshader" class="section level2">
<h2 class="hasAnchor">
<a href="#mapping-with-rayshader" class="anchor"></a>Mapping with rayshader</h2>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">rayshader</span>)

<span class="co">#Here, I load a map with the raster package.</span>
<span class="no">loadzip</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span>(<span class="st">"https://tylermw.com/data/dem_01.tif.zip"</span>, <span class="no">loadzip</span>)
<span class="no">localtif</span> <span class="kw">=</span> <span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span>(<span class="fu"><a href="https://rdrr.io/r/utils/unzip.html">unzip</a></span>(<span class="no">loadzip</span>, <span class="st">"dem_01.tif"</span>))
<span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span>(<span class="no">loadzip</span>)

<span class="co">#And convert it to a matrix:</span>
<span class="no">elmat</span> <span class="kw">=</span> <span class="fu"><a href="reference/raster_to_matrix.html">raster_to_matrix</a></span>(<span class="no">localtif</span>)

<span class="co">#We use another one of rayshader's built-in textures:</span>
<span class="no">elmat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">texture</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/plot_map.html">plot_map</a></span>()</pre></div>
<p><img src="reference/figures/README_basicmapping-1.png"><!-- --></p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="co">#sphere_shade can shift the sun direction:</span>
<span class="no">elmat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">sunangle</span> <span class="kw">=</span> <span class="fl">45</span>, <span class="kw">texture</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/plot_map.html">plot_map</a></span>()</pre></div>
<p><img src="reference/figures/README_basicmapping-2.png"><!-- --></p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="co">#detect_water and add_water adds a water layer to the map:</span>
<span class="no">elmat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">texture</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_water.html">add_water</a></span>(<span class="fu"><a href="reference/detect_water.html">detect_water</a></span>(<span class="no">elmat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/plot_map.html">plot_map</a></span>()</pre></div>
<p><img src="reference/figures/README_basicmapping-3.png"><!-- --></p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="co">#And we can add a raytraced layer from that sun direction as well:</span>
<span class="no">elmat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">texture</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_water.html">add_water</a></span>(<span class="fu"><a href="reference/detect_water.html">detect_water</a></span>(<span class="no">elmat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="fu"><a href="reference/ray_shade.html">ray_shade</a></span>(<span class="no">elmat</span>), <span class="fl">0.5</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/plot_map.html">plot_map</a></span>()</pre></div>
<p><img src="reference/figures/README_basicmapping-4.png"><!-- --></p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="co">#And here we add an ambient occlusion shadow layer, which models </span>
<span class="co">#lighting from atmospheric scattering:</span>

<span class="no">elmat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">texture</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_water.html">add_water</a></span>(<span class="fu"><a href="reference/detect_water.html">detect_water</a></span>(<span class="no">elmat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="fu"><a href="reference/ray_shade.html">ray_shade</a></span>(<span class="no">elmat</span>), <span class="fl">0.5</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="fu"><a href="reference/ambient_shade.html">ambient_shade</a></span>(<span class="no">elmat</span>), <span class="fl">0</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/plot_map.html">plot_map</a></span>()</pre></div>
<p><img src="reference/figures/README_basicmapping-5.png"><!-- --></p>
<p>Rayshader also supports 3D mapping by passing a texture map (either external or one produced by rayshader) into the <code>plot_3d</code> function.</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="no">elmat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">texture</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_water.html">add_water</a></span>(<span class="fu"><a href="reference/detect_water.html">detect_water</a></span>(<span class="no">elmat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="fu"><a href="reference/ray_shade.html">ray_shade</a></span>(<span class="no">elmat</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">3</span>), <span class="fl">0.5</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="fu"><a href="reference/ambient_shade.html">ambient_shade</a></span>(<span class="no">elmat</span>), <span class="fl">0</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/plot_3d.html">plot_3d</a></span>(<span class="no">elmat</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">135</span>, <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.75</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">45</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>, <span class="fl">800</span>))
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>()</pre></div>
<p><img src="reference/figures/README_three-d-1.png"><!-- --></p>
<p>You can add a scale bar, as well as a compass using <code><a href="reference/render_scalebar.html">render_scalebar()</a></code> and <code><a href="reference/render_compass.html">render_compass()</a></code></p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="fu"><a href="reference/render_camera.html">render_camera</a></span>(<span class="kw">fov</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">60</span>, <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.75</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">45</span>)
<span class="fu"><a href="reference/render_scalebar.html">render_scalebar</a></span>(<span class="kw">limits</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">10</span>),<span class="kw">label_unit</span> <span class="kw">=</span> <span class="st">"km"</span>,<span class="kw">position</span> <span class="kw">=</span> <span class="st">"W"</span>, <span class="kw">y</span><span class="kw">=</span><span class="fl">50</span>,
                <span class="kw">scale_length</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.33</span>,<span class="fl">1</span>))
<span class="fu"><a href="reference/render_compass.html">render_compass</a></span>(<span class="kw">position</span> <span class="kw">=</span> <span class="st">"E"</span>)
<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>(<span class="kw">clear</span><span class="kw">=</span><span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/unnamed-chunk-1-1.png"><!-- --></p>
<p>You can also render using the built-in pathtracer, powered by <a href="https://www.rayrender.net">rayrender</a>. Simply replace <code><a href="reference/render_snapshot.html">render_snapshot()</a></code> with <code><a href="reference/render_highquality.html">render_highquality()</a></code>. When <code><a href="reference/render_highquality.html">render_highquality()</a></code> is called, there’s no need to pre-compute the shadows with any of the <code>_shade()</code> functions, so we remove those:</p>
<div class="sourceCode" id="cb9"><pre class="r"><span class="no">elmat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">texture</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_water.html">add_water</a></span>(<span class="fu"><a href="reference/detect_water.html">detect_water</a></span>(<span class="no">elmat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/plot_3d.html">plot_3d</a></span>(<span class="no">elmat</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">60</span>, <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.75</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">45</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>, <span class="fl">800</span>))

<span class="fu"><a href="reference/render_scalebar.html">render_scalebar</a></span>(<span class="kw">limits</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">10</span>),<span class="kw">label_unit</span> <span class="kw">=</span> <span class="st">"km"</span>,<span class="kw">position</span> <span class="kw">=</span> <span class="st">"W"</span>, <span class="kw">y</span><span class="kw">=</span><span class="fl">50</span>,
                <span class="kw">scale_length</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.33</span>,<span class="fl">1</span>))

<span class="fu"><a href="reference/render_compass.html">render_compass</a></span>(<span class="kw">position</span> <span class="kw">=</span> <span class="st">"E"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_highquality.html">render_highquality</a></span>(<span class="kw">samples</span><span class="kw">=</span><span class="fl">200</span>, <span class="kw">scale_text_size</span> <span class="kw">=</span> <span class="fl">24</span>,<span class="kw">clear</span><span class="kw">=</span><span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_three-dhq-1.png"><!-- --></p>
<p>You can also easily add a water layer by setting <code>water = TRUE</code> in <code><a href="reference/plot_3d.html">plot_3d()</a></code> (and setting <code>waterdepth</code> if the water level is not 0), or by using the function <code><a href="reference/render_water.html">render_water()</a></code> after the 3D map has been rendered. You can customize the appearance and transparancy of the water layer via function arguments. Here’s an example using bathymetric/topographic data of Monterey Bay, CA (included with rayshader):</p>
<div class="sourceCode" id="cb10"><pre class="r"><span class="no">montshadow</span> <span class="kw">=</span> <span class="fu"><a href="reference/ray_shade.html">ray_shade</a></span>(<span class="no">montereybay</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>, <span class="kw">lambert</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="no">montamb</span> <span class="kw">=</span> <span class="fu"><a href="reference/ambient_shade.html">ambient_shade</a></span>(<span class="no">montereybay</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>)
<span class="no">montereybay</span> <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">texture</span> <span class="kw">=</span> <span class="st">"imhof1"</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="no">montshadow</span>, <span class="fl">0.5</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="no">montamb</span>, <span class="fl">0</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/plot_3d.html">plot_3d</a></span>(<span class="no">montereybay</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>, <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">theta</span> <span class="kw">=</span> -<span class="fl">45</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">45</span>,
            <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>, <span class="fl">800</span>), <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.75</span>,
            <span class="kw">water</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">waterdepth</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">wateralpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">watercolor</span> <span class="kw">=</span> <span class="st">"lightblue"</span>,
            <span class="kw">waterlinecolor</span> <span class="kw">=</span> <span class="st">"white"</span>, <span class="kw">waterlinealpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>(<span class="kw">clear</span><span class="kw">=</span><span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_three-d-water-1.png"><!-- --></p>
<p>Water is also supported in <code><a href="reference/render_highquality.html">render_highquality()</a></code>. We load the <code>rayrender</code> package to change the ground material to include a checker pattern. By default, the camera looks at the origin, but we shift it down slightly to center the map.</p>
<div class="sourceCode" id="cb11"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">rayrender</span>)

<span class="no">montereybay</span> <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">texture</span> <span class="kw">=</span> <span class="st">"imhof1"</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/plot_3d.html">plot_3d</a></span>(<span class="no">montereybay</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>, <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">70</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">270</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">30</span>,
            <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>, <span class="fl">800</span>), <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.6</span>,
            <span class="kw">water</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">waterdepth</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">wateralpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">watercolor</span> <span class="kw">=</span> <span class="st">"#233aa1"</span>,
            <span class="kw">waterlinecolor</span> <span class="kw">=</span> <span class="st">"white"</span>, <span class="kw">waterlinealpha</span> <span class="kw">=</span> <span class="fl">0.5</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_highquality.html">render_highquality</a></span>(<span class="kw">lightdirection</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">45</span>,<span class="fl">45</span>), <span class="kw">lightaltitude</span>  <span class="kw">=</span> <span class="fl">30</span>, <span class="kw">clamp_value</span> <span class="kw">=</span> <span class="fl">10</span>,
                   <span class="kw">samples</span> <span class="kw">=</span> <span class="fl">200</span>, <span class="kw">camera_lookat</span><span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,-<span class="fl">50</span>,<span class="fl">0</span>),
                   <span class="kw">ground_material</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/rayrender/man/diffuse.html">diffuse</a></span>(<span class="kw">color</span><span class="kw">=</span><span class="st">"grey50"</span>,<span class="kw">checkercolor</span> <span class="kw">=</span> <span class="st">"grey20"</span>, <span class="kw">checkerperiod</span> <span class="kw">=</span> <span class="fl">100</span>))</pre></div>
<p><img src="reference/figures/hq-1.png"><!-- --></p>
<p>Rayshader also has map shapes other than rectangular included <code><a href="https://rdrr.io/r/base/c.html">c("hex", "circle")</a></code>, and you can customize the map into any shape you want by setting the areas you do not want to display to <code>NA</code>.</p>
<div class="sourceCode" id="cb12"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mfrow</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>))
<span class="no">montereybay</span> <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">texture</span> <span class="kw">=</span> <span class="st">"imhof1"</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="no">montshadow</span>, <span class="fl">0.5</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="no">montamb</span>, <span class="fl">0</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/plot_3d.html">plot_3d</a></span>(<span class="no">montereybay</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>, <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">theta</span> <span class="kw">=</span> -<span class="fl">45</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">45</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>, <span class="fl">800</span>), <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.6</span>,
            <span class="kw">water</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">waterdepth</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">wateralpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">watercolor</span> <span class="kw">=</span> <span class="st">"lightblue"</span>,
            <span class="kw">waterlinecolor</span> <span class="kw">=</span> <span class="st">"white"</span>, <span class="kw">waterlinealpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">baseshape</span> <span class="kw">=</span> <span class="st">"circle"</span>)

<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>(<span class="kw">clear</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="no">montereybay</span> <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">texture</span> <span class="kw">=</span> <span class="st">"imhof1"</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="no">montshadow</span>, <span class="fl">0.5</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="no">montamb</span>, <span class="fl">0</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/plot_3d.html">plot_3d</a></span>(<span class="no">montereybay</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>, <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">theta</span> <span class="kw">=</span> -<span class="fl">45</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">45</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>, <span class="fl">800</span>), <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.6</span>,
            <span class="kw">water</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">waterdepth</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">wateralpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">watercolor</span> <span class="kw">=</span> <span class="st">"lightblue"</span>,
            <span class="kw">waterlinecolor</span> <span class="kw">=</span> <span class="st">"white"</span>, <span class="kw">waterlinealpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">baseshape</span> <span class="kw">=</span> <span class="st">"hex"</span>)

<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>(<span class="kw">clear</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_three-d-shapes-1.png"><!-- --></p>
<p>Adding text labels is done with the <code><a href="reference/render_label.html">render_label()</a></code> function, which also allows you to customize the line type, color, and size along with the font:</p>
<div class="sourceCode" id="cb13"><pre class="r"><span class="no">montereybay</span> <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">texture</span> <span class="kw">=</span> <span class="st">"imhof1"</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="no">montshadow</span>, <span class="fl">0.5</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="no">montamb</span>,<span class="fl">0</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="reference/plot_3d.html">plot_3d</a></span>(<span class="no">montereybay</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>, <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">theta</span> <span class="kw">=</span> -<span class="fl">100</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">30</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>, <span class="fl">800</span>), <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.6</span>,
            <span class="kw">water</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">waterdepth</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">waterlinecolor</span> <span class="kw">=</span> <span class="st">"white"</span>, <span class="kw">waterlinealpha</span> <span class="kw">=</span> <span class="fl">0.5</span>,
            <span class="kw">wateralpha</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">watercolor</span> <span class="kw">=</span> <span class="st">"lightblue"</span>)
<span class="fu"><a href="reference/render_label.html">render_label</a></span>(<span class="no">montereybay</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="fl">350</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="fl">160</span>, <span class="kw">z</span> <span class="kw">=</span> <span class="fl">1000</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>,
             <span class="kw">text</span> <span class="kw">=</span> <span class="st">"Moss Landing"</span>, <span class="kw">textsize</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="kw">linewidth</span> <span class="kw">=</span> <span class="fl">5</span>)
<span class="fu"><a href="reference/render_label.html">render_label</a></span>(<span class="no">montereybay</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="fl">220</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="fl">70</span>, <span class="kw">z</span> <span class="kw">=</span> <span class="fl">7000</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>,
             <span class="kw">text</span> <span class="kw">=</span> <span class="st">"Santa Cruz"</span>, <span class="kw">textcolor</span> <span class="kw">=</span> <span class="st">"darkred"</span>, <span class="kw">linecolor</span> <span class="kw">=</span> <span class="st">"darkred"</span>,
             <span class="kw">textsize</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="kw">linewidth</span> <span class="kw">=</span> <span class="fl">5</span>)
<span class="fu"><a href="reference/render_label.html">render_label</a></span>(<span class="no">montereybay</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="fl">300</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="fl">270</span>, <span class="kw">z</span> <span class="kw">=</span> <span class="fl">4000</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>,
             <span class="kw">text</span> <span class="kw">=</span> <span class="st">"Monterey"</span>, <span class="kw">dashed</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">textsize</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="kw">linewidth</span> <span class="kw">=</span> <span class="fl">5</span>)
<span class="fu"><a href="reference/render_label.html">render_label</a></span>(<span class="no">montereybay</span>, <span class="kw">x</span> <span class="kw">=</span> <span class="fl">50</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="fl">270</span>, <span class="kw">z</span> <span class="kw">=</span> <span class="fl">1000</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">50</span>,  <span class="kw">textcolor</span> <span class="kw">=</span> <span class="st">"white"</span>, <span class="kw">linecolor</span> <span class="kw">=</span> <span class="st">"white"</span>,
             <span class="kw">text</span> <span class="kw">=</span> <span class="st">"Monterey Canyon"</span>, <span class="kw">relativez</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">textsize</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="kw">linewidth</span> <span class="kw">=</span> <span class="fl">5</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>(<span class="kw">clear</span><span class="kw">=</span><span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_three-d-labels-1.png"><!-- --></p>
<p>Labels are also supported in <code><a href="reference/render_highquality.html">render_highquality()</a></code>:</p>
<div class="sourceCode" id="cb14"><pre class="r"><span class="fu"><a href="reference/render_highquality.html">render_highquality</a></span>(<span class="kw">samples</span><span class="kw">=</span><span class="fl">200</span>, <span class="kw">line_radius</span> <span class="kw">=</span> <span class="fl">1</span>, <span class="kw">text_size</span> <span class="kw">=</span> <span class="fl">18</span>, <span class="kw">text_offset</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">12</span>,<span class="fl">0</span>),
                   <span class="kw">clamp_value</span><span class="kw">=</span><span class="fl">10</span>, <span class="kw">clear</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_hqlabels-1.png"><!-- --></p>
<p>3D paths, points, and polygons can be added directly from spatial objects from the <code>sf</code> library:</p>
<p>Polygons:</p>
<div class="sourceCode" id="cb15"><pre class="r"><span class="no">montereybay</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">texture</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="fu"><a href="reference/ray_shade.html">ray_shade</a></span>(<span class="no">montereybay</span>,<span class="kw">zscale</span><span class="kw">=</span><span class="fl">50</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/plot_3d.html">plot_3d</a></span>(<span class="no">montereybay</span>,<span class="kw">water</span><span class="kw">=</span><span class="fl">TRUE</span>, <span class="kw">windowsize</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>,<span class="fl">800</span>), <span class="kw">watercolor</span><span class="kw">=</span><span class="st">"dodgerblue"</span>)
<span class="fu"><a href="reference/render_camera.html">render_camera</a></span>(<span class="kw">theta</span><span class="kw">=</span>-<span class="fl">60</span>,  <span class="kw">phi</span><span class="kw">=</span><span class="fl">60</span>, <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.85</span>, <span class="kw">fov</span><span class="kw">=</span><span class="fl">30</span>)

<span class="co">#We will apply a negative buffer to create space between adjacent polygons:</span>
<span class="no">mont_county_buff</span> <span class="kw">=</span> <span class="kw pkg">sf</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sf/man/geos_unary.html">st_simplify</a></span>(<span class="kw pkg">sf</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sf/man/geos_unary.html">st_buffer</a></span>(<span class="no">monterey_counties_sf</span>,-<span class="fl">0.003</span>), <span class="kw">dTolerance</span><span class="kw">=</span><span class="fl">0.001</span>)

<span class="fu"><a href="reference/render_polygons.html">render_polygons</a></span>(<span class="no">mont_county_buff</span>,
                <span class="kw">extent</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span>(<span class="no">montereybay</span>,<span class="st">"extent"</span>), <span class="kw">data_column_top</span> <span class="kw">=</span> <span class="st">"ALAND"</span>,
                <span class="kw">scale_data</span> <span class="kw">=</span> <span class="fl">300</span>/(<span class="fl">2.6E9</span>), <span class="kw">color</span><span class="kw">=</span><span class="st">"chartreuse4"</span>,
                <span class="kw">parallel</span><span class="kw">=</span><span class="fl">TRUE</span>)
<span class="fu"><a href="reference/render_highquality.html">render_highquality</a></span>(<span class="kw">clamp_value</span><span class="kw">=</span><span class="fl">10</span>,<span class="kw">sample_method</span><span class="kw">=</span><span class="st">"stratified"</span>)</pre></div>
<p><img src="reference/figures/README_polygon-1.png"><!-- --></p>
<div class="sourceCode" id="cb16"><pre class="r"><span class="fu"><a href="reference/render_polygons.html">render_polygons</a></span>(<span class="kw">clear_previous</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="fu"><a href="reference/render_camera.html">render_camera</a></span>(<span class="kw">theta</span><span class="kw">=</span><span class="fl">225</span>, <span class="kw">phi</span><span class="kw">=</span><span class="fl">23</span>,<span class="kw">zoom</span><span class="kw">=</span><span class="fl">0.27</span>,<span class="kw">fov</span><span class="kw">=</span><span class="fl">48</span>)</pre></div>
<p>Points:</p>
<div class="sourceCode" id="cb17"><pre class="r"><span class="no">moss_landing_coord</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">36.806807</span>, -<span class="fl">121.793332</span>)
<span class="no">x_vel_out</span> <span class="kw">=</span> -<span class="fl">0.001</span> + <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">1000</span>)[<span class="fl">1</span>:<span class="fl">500</span>]/<span class="fl">1000</span>
<span class="no">y_vel_out</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">1000</span>)[<span class="fl">1</span>:<span class="fl">500</span>]/<span class="fl">200</span>
<span class="no">z_out</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>,<span class="fl">2000</span>,<span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">180</span>), <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">2000</span>,<span class="fl">0</span>,<span class="kw">length.out</span><span class="kw">=</span><span class="fl">10</span>),
          <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">0</span>,<span class="fl">2000</span>,<span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">100</span>), <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">2000</span>,<span class="fl">0</span>,<span class="kw">length.out</span><span class="kw">=</span><span class="fl">10</span>))

<span class="no">bird_track_lat</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>()
<span class="no">bird_track_long</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>()
<span class="no">bird_track_lat</span><span class="kw">[[</span><span class="fl">1</span>]] <span class="kw">=</span> <span class="no">moss_landing_coord</span>[<span class="fl">1</span>]
<span class="no">bird_track_long</span><span class="kw">[[</span><span class="fl">1</span>]] <span class="kw">=</span> <span class="no">moss_landing_coord</span>[<span class="fl">2</span>]

<span class="kw">for</span>(<span class="no">i</span> <span class="kw">in</span> <span class="fl">2</span>:<span class="fl">500</span>) {
  <span class="no">bird_track_lat</span><span class="kw">[[</span><span class="no">i</span>]] <span class="kw">=</span> <span class="no">bird_track_lat</span><span class="kw">[[</span><span class="no">i</span>-<span class="fl">1</span>]] + <span class="no">y_vel_out</span>[<span class="no">i</span>]
  <span class="no">bird_track_long</span><span class="kw">[[</span><span class="no">i</span>]] <span class="kw">=</span> <span class="no">bird_track_long</span><span class="kw">[[</span><span class="no">i</span>-<span class="fl">1</span>]] + <span class="no">x_vel_out</span>[<span class="no">i</span>]
}

<span class="fu"><a href="reference/render_points.html">render_points</a></span>(<span class="kw">extent</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span>(<span class="no">montereybay</span>,<span class="st">"extent"</span>),
              <span class="kw">lat</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="no">bird_track_lat</span>), <span class="kw">long</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="no">bird_track_long</span>),
              <span class="kw">altitude</span> <span class="kw">=</span> <span class="no">z_out</span>, <span class="kw">zscale</span><span class="kw">=</span><span class="fl">50</span>, <span class="kw">color</span><span class="kw">=</span><span class="st">"red"</span>)
<span class="fu"><a href="reference/render_highquality.html">render_highquality</a></span>(<span class="kw">point_radius</span> <span class="kw">=</span> <span class="fl">1</span>,<span class="kw">sample_method</span><span class="kw">=</span><span class="st">"stratified"</span>)</pre></div>
<p><img src="reference/figures/README_points-1.png"><!-- --></p>
<div class="sourceCode" id="cb18"><pre class="r"><span class="fu"><a href="reference/render_points.html">render_points</a></span>(<span class="kw">clear_previous</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p>Paths:</p>
<div class="sourceCode" id="cb19"><pre class="r"><span class="fu"><a href="reference/render_path.html">render_path</a></span>(<span class="kw">extent</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span>(<span class="no">montereybay</span>,<span class="st">"extent"</span>),
            <span class="kw">lat</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="no">bird_track_lat</span>), <span class="kw">long</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>(<span class="no">bird_track_long</span>),
            <span class="kw">altitude</span> <span class="kw">=</span> <span class="no">z_out</span>, <span class="kw">zscale</span><span class="kw">=</span><span class="fl">50</span>,<span class="kw">color</span><span class="kw">=</span><span class="st">"white"</span>, <span class="kw">antialias</span><span class="kw">=</span><span class="fl">TRUE</span>)
<span class="fu"><a href="reference/render_highquality.html">render_highquality</a></span>(<span class="kw">line_radius</span> <span class="kw">=</span> <span class="fl">1</span>,<span class="kw">sample_method</span><span class="kw">=</span><span class="st">"stratified"</span>, <span class="kw">clear</span><span class="kw">=</span><span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_paths-1.png"><!-- --></p>
<p>You can also apply a post-processing effect to the 3D maps to render maps with depth of field with the <code><a href="reference/render_depth.html">render_depth()</a></code> function:</p>
<div class="sourceCode" id="cb20"><pre class="r"><span class="no">elmat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/sphere_shade.html">sphere_shade</a></span>(<span class="kw">texture</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_water.html">add_water</a></span>(<span class="fu"><a href="reference/detect_water.html">detect_water</a></span>(<span class="no">elmat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"desert"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="fu"><a href="reference/ray_shade.html">ray_shade</a></span>(<span class="no">elmat</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">3</span>), <span class="fl">0.5</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/add_shadow.html">add_shadow</a></span>(<span class="fu"><a href="reference/ambient_shade.html">ambient_shade</a></span>(<span class="no">elmat</span>), <span class="fl">0</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/plot_3d.html">plot_3d</a></span>(<span class="no">elmat</span>, <span class="kw">zscale</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">30</span>, <span class="kw">theta</span> <span class="kw">=</span> -<span class="fl">225</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">25</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>, <span class="fl">800</span>), <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.3</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_depth.html">render_depth</a></span>(<span class="kw">focus</span> <span class="kw">=</span> <span class="fl">0.6</span>, <span class="kw">focallength</span> <span class="kw">=</span> <span class="fl">200</span>, <span class="kw">clear</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_three-d-depth-1.png"><!-- --></p>
</div>
<div id="3d-plotting-with-rayshader-and-ggplot2" class="section level2">
<h2 class="hasAnchor">
<a href="#3d-plotting-with-rayshader-and-ggplot2" class="anchor"></a>3D plotting with rayshader and ggplot2</h2>
<p>Rayshader can also be used to make 3D plots out of ggplot2 objects using the <code><a href="reference/plot_gg.html">plot_gg()</a></code> function. Here, I turn a color density plot into a 3D density plot. <code><a href="reference/plot_gg.html">plot_gg()</a></code> detects that the user mapped the <code>fill</code> aesthetic to color and uses that information to project the figure into 3D.</p>
<div class="sourceCode" id="cb21"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="no">ggdiamonds</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">diamonds</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density_2d.html">stat_density_2d</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">x</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">depth</span>, <span class="kw">fill</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">stat</a></span>(<span class="no">nlevel</span>)),
                  <span class="kw">geom</span> <span class="kw">=</span> <span class="st">"polygon"</span>, <span class="kw">n</span> <span class="kw">=</span> <span class="fl">100</span>, <span class="kw">bins</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">contour</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="no">clarity</span>~<span class="no">.</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span>(<span class="kw">option</span> <span class="kw">=</span> <span class="st">"A"</span>)

<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mfrow</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>))

<span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">ggdiamonds</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">raytrace</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">preview</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">ggdiamonds</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">multicore</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">scale</span> <span class="kw">=</span> <span class="fl">250</span>,
        <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.7</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">30</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">800</span>, <span class="fl">800</span>))
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>(<span class="kw">clear</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_ggplots-1.png"><!-- --></p>
<p>Rayshader will automatically ignore lines and other elements that should not be mapped to 3D. Here’s a contour plot of the <code>volcano</code> dataset.</p>
<div class="sourceCode" id="cb22"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">reshape2</span>)
<span class="co">#Contours and other lines will automatically be ignored. Here is the volcano dataset:</span>

<span class="no">ggvolcano</span> <span class="kw">=</span> <span class="no">volcano</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/melt.html">melt</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">Var1</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">Var2</span>, <span class="kw">fill</span> <span class="kw">=</span> <span class="no">value</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_contour.html">geom_contour</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">Var1</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">Var2</span>, <span class="kw">z</span> <span class="kw">=</span> <span class="no">value</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"black"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="st">"X"</span>, <span class="kw">expand</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(<span class="st">"Y"</span>, <span class="kw">expand</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradientn</a></span>(<span class="st">"Z"</span>, <span class="kw">colours</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html">terrain.colors</a></span>(<span class="fl">10</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span>()

<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mfrow</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>))
<span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">ggvolcano</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">7</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">raytrace</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">preview</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co">## Warning: Removed 1861 row(s) containing missing values (geom_path).</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="r"><span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">ggvolcano</span>, <span class="kw">multicore</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">raytrace</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">7</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="fl">4</span>,
        <span class="kw">scale</span> <span class="kw">=</span> <span class="fl">300</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1400</span>, <span class="fl">866</span>), <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.6</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">30</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">30</span>)</pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co">## Warning: Removed 1861 row(s) containing missing values (geom_path).</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)

<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>(<span class="kw">clear</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_ggplots_2-1.png"><!-- --></p>
<p>Rayshader also detects when the user passes the <code>color</code> aesthetic, and maps those values to 3D. If both <code>color</code> and <code>fill</code> are passed, however, rayshader will default to <code>fill</code>.</p>
<div class="sourceCode" id="cb27"><pre class="r"><span class="no">mtplot</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">mtcars</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">mpg</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">disp</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">cyl</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_continuous.html">scale_color_continuous</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">8</span>))

<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mfrow</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>))
<span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">mtplot</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">3.5</span>, <span class="kw">raytrace</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">preview</span> <span class="kw">=</span> <span class="fl">TRUE</span>)

<span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">mtplot</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">3.5</span>, <span class="kw">multicore</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">800</span>, <span class="fl">800</span>),
        <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.85</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">35</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">30</span>, <span class="kw">sunangle</span> <span class="kw">=</span> <span class="fl">225</span>, <span class="kw">soliddepth</span> <span class="kw">=</span> -<span class="fl">100</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>(<span class="kw">clear</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_ggplots_3-1.png"><!-- --></p>
<p>Utilize combinations of line color and fill to create different effects. Here is a terraced hexbin plot, created by mapping the line colors of the hexagons to black.</p>
<div class="sourceCode" id="cb28"><pre class="r"><span class="no">a</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">20000</span>, <span class="fl">10</span>, <span class="fl">1.9</span>), <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">20000</span>, <span class="fl">10</span>, <span class="fl">1.2</span>))
<span class="no">b</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">20000</span>, <span class="fl">14.5</span>, <span class="fl">1.9</span>), <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">20000</span>, <span class="fl">14.5</span>, <span class="fl">1.9</span>))
<span class="no">c</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">20000</span>, <span class="fl">9.5</span>, <span class="fl">1.9</span>), <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">20000</span>, <span class="fl">15.5</span>, <span class="fl">1.9</span>))
<span class="no">data</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">a</span>, <span class="no">b</span>, <span class="no">c</span>)

<span class="co">#Lines</span>
<span class="no">pp</span> <span class="kw">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">x</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">y</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex</a></span>(<span class="kw">bins</span> <span class="kw">=</span> <span class="fl">20</span>, <span class="kw">size</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"black"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span>(<span class="kw">option</span> <span class="kw">=</span> <span class="st">"C"</span>)

<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mfrow</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">2</span>))
<span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">pp</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">scale</span> <span class="kw">=</span> <span class="fl">300</span>, <span class="kw">raytrace</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">preview</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">pp</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">scale</span> <span class="kw">=</span> <span class="fl">300</span>, <span class="kw">multicore</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1000</span>, <span class="fl">800</span>))
<span class="fu"><a href="reference/render_camera.html">render_camera</a></span>(<span class="kw">fov</span> <span class="kw">=</span> <span class="fl">70</span>, <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.5</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">130</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">35</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_snapshot.html">render_snapshot</a></span>(<span class="kw">clear</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_ggplots_4-1.png"><!-- --></p>
<p>You can also use the <code><a href="reference/render_depth.html">render_depth()</a></code> function to direct the viewer’s focus to a important areas in the figure.</p>
<div class="sourceCode" id="cb29"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mfrow</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>))
<span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">pp</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">scale</span> <span class="kw">=</span> <span class="fl">300</span>, <span class="kw">multicore</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1200</span>, <span class="fl">960</span>),
        <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">70</span>, <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.4</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">330</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">40</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_depth.html">render_depth</a></span>(<span class="kw">focus</span> <span class="kw">=</span> <span class="fl">0.68</span>, <span class="kw">focallength</span> <span class="kw">=</span> <span class="fl">200</span>,<span class="kw">clear</span><span class="kw">=</span><span class="fl">TRUE</span>)</pre></div>
<p><img src="reference/figures/README_ggplots_5-1.png"><!-- --></p>
<p>Finally, you can increase the allowable error in triangulating the model to vastly reduce the size. Here, we reduce the model to 1/100th of it’s raw (un-triangulated) size, while maintaining model quality. This can improve the performance when rendering 3D ggplots with <code><a href="reference/render_highquality.html">render_highquality()</a></code>, as well as improve performance on slower computers. This triangulation is powered by the {terrainmeshr} package.</p>
<p>Here, we make a 3D ggplot out of glass, using a triangulated model and <code><a href="reference/render_highquality.html">render_highquality()</a></code>.</p>
<div class="sourceCode" id="cb30"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="kw">mfrow</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">1</span>))
<span class="fu"><a href="reference/plot_gg.html">plot_gg</a></span>(<span class="no">pp</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">height</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">scale</span> <span class="kw">=</span> <span class="fl">300</span>, <span class="kw">raytrace</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">windowsize</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1200</span>, <span class="fl">960</span>),
        <span class="kw">fov</span> <span class="kw">=</span> <span class="fl">70</span>, <span class="kw">zoom</span> <span class="kw">=</span> <span class="fl">0.4</span>, <span class="kw">theta</span> <span class="kw">=</span> <span class="fl">330</span>, <span class="kw">phi</span> <span class="kw">=</span> <span class="fl">20</span>,  <span class="kw">max_error</span> <span class="kw">=</span> <span class="fl">0.01</span>, <span class="kw">verbose</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="co">## 98.8% reduction: Number of triangles reduced from 3600000 to 41446. Error: 0.009996</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.2</span>)
<span class="fu"><a href="reference/render_highquality.html">render_highquality</a></span>(<span class="kw">samples</span> <span class="kw">=</span> <span class="fl">400</span>, <span class="kw">aperture</span><span class="kw">=</span><span class="fl">30</span>, <span class="kw">light</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">ambient</span> <span class="kw">=</span> <span class="fl">TRUE</span>,<span class="kw">focal_distance</span> <span class="kw">=</span> <span class="fl">1700</span>,
                   <span class="kw">obj_material</span> <span class="kw">=</span> <span class="kw pkg">rayrender</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rayrender/man/dielectric.html">dielectric</a></span>(<span class="kw">attenuation</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0.3</span>)/<span class="fl">200</span>),
                   <span class="kw">ground_material</span> <span class="kw">=</span> <span class="kw pkg">rayrender</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rayrender/man/diffuse.html">diffuse</a></span>(<span class="kw">checkercolor</span> <span class="kw">=</span> <span class="st">"grey80"</span>,<span class="kw">sigma</span><span class="kw">=</span><span class="fl">90</span>,<span class="kw">checkerperiod</span> <span class="kw">=</span> <span class="fl">100</span>))</pre></div>
<p><img src="reference/figures/README_ggplots_6-1.png"><!-- --></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=rayshader">https://​cloud.r-project.org/​package=rayshader</a>
</li>
<li>Browse source code at <br><a href="https://github.com/tylermorganwall/rayshader/">https://​github.com/​tylermorganwall/​rayshader/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/tylermorganwall/rayshader/issues">https://​github.com/​tylermorganwall/​rayshader/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.tylermw.com">Tyler Morgan-Wall</a> <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://www.tylermw.com">Tyler Morgan-Wall</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>